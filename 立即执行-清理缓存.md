# 🚀 立即执行 - 清理服务器缓存

## 📋 当前问题

币安/欧意钱包中修改了很多次代码，但仍然显示旧版本 → **需要清理服务器缓存**

---

## ✅ 方法 1: 自动脚本（推荐）

### 执行命令

```bash
# 1. 进入网站目录
cd /root/dreamle-mining

# 2. 给脚本执行权限
chmod +x clear-cache-and-restart.sh

# 3. 运行清理脚本
./clear-cache-and-restart.sh
```

### 脚本会自动完成：
- ✅ 更新版本号
- ✅ 清理 Nginx/Apache 缓存
- ✅ 重启 Web 服务器
- ✅ 验证修复是否存在
- ✅ 生成带缓存破坏参数的访问链接

---

## ✅ 方法 2: 手动执行

### 如果使用 Nginx

```bash
# 清理缓存
sudo rm -rf /var/cache/nginx/*

# 重新加载
sudo nginx -s reload

# 或者重启
sudo systemctl restart nginx
```

### 如果使用 Apache

```bash
# 清理缓存
sudo rm -rf /var/cache/apache2/*

# 重启服务
sudo systemctl restart apache2
```

---

## 🔗 访问新版本

清理缓存后，让用户访问带时间戳的 URL：

```
https://www.dreamlewebai.com/platform.html?v=20250930003
```

每次修改后更新时间戳数字。

---

## 🧪 验证是否成功

### 1. 检查控制台日志

在浏览器控制台应该看到：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔖 应用版本: 20250930-003
🕐 构建时间: 2025-09-30 15:30:00
📱 修复内容: 币安刷新问题 + 欧意选择器 + USDT池偏移
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 2. 检查修复功能

- ✅ 币安钱包不再无限刷新
- ✅ 欧意钱包可以选择矿机等级
- ✅ USDT Pool Balance 显示正确（实际值 + 273211）

### 3. 检查文件时间戳

```bash
ls -lh platform.html version.js
```

应该显示最新的修改时间。

---

## 📱 用户端操作

### 币安钱包用户

1. 完全关闭币安 App
2. 重新打开
3. 访问: `https://www.dreamlewebai.com/platform.html?v=20250930003`

### 欧意钱包用户

1. 完全关闭欧意 App
2. 重新打开
3. 访问: `https://www.dreamlewebai.com/platform.html?v=20250930003`

---

## 🎯 快速命令（复制粘贴）

```bash
cd /root/dreamle-mining && chmod +x clear-cache-and-restart.sh && ./clear-cache-and-restart.sh
```

---

## ✅ 已完成的修复

1. ✅ 币安钱包无限刷新问题 - 多层拦截器
2. ✅ 欧意钱包选择器无反应 - 多事件监听
3. ✅ USDT Pool Balance 偏移量 - +273211
4. ✅ 版本控制系统 - version.js
5. ✅ 移除中文版本显示框

---

**立即执行上面的命令，然后让用户重新访问网站！**

